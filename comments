z flag is not used.
flag in and out names are odd. better to say new and old.
